# Modified from
# https://aur.archlinux.org/cgit/aur.git/plain/workbench-demo-compatibility.patch?h=workbench&id=060f777

diff --git a/build-aux/library.js b/build-aux/library.js
index ec18b35..df33f0e 100755
--- a/build-aux/library.js
+++ b/build-aux/library.js
@@ -63,10 +63,6 @@ const demos = [];
     const demo = JSON.parse(str);
     demo.name = file_info.get_name();
 
-    if (!isDemoCompatible(demo)) {
-      continue;
-    }
-
     const languages = [];
     if (demo_dir.get_child("main.js").query_exists(null)) {
       languages.push("javascript");
@@ -226,25 +222,4 @@ async function copyDirectory(source, destination) {
   }
 }
 
-const key_file = new GLib.KeyFile();
-key_file.load_from_file("/.flatpak-info", GLib.KeyFileFlags.NONE);
-// runtime/org.gnome.Sdk/x86_64/master
-const [, , , runtime_version] = key_file
-  .get_string("Application", "runtime")
-  .split("/");
-
-function isDemoCompatible(demo) {
-  const demo_runtime_version = demo["runtime-version"];
-
-  if (demo_runtime_version === "master") {
-    return runtime_version === "master";
-  } else if (runtime_version === "master") {
-    return true;
-  } else if (!demo_runtime_version) {
-    return true;
-  }
-
-  return +runtime_version >= +demo_runtime_version;
-}
-
 loop.run();
diff --git a/src/cli/main.js b/src/cli/main.js
index 5fc5848..7c0fa35 100644
--- a/src/cli/main.js
+++ b/src/cli/main.js
@@ -129,14 +129,6 @@ async function ci({ filenames }) {
 
     print(`\nðŸ“‚${demo_dir.get_path()}`);
 
-    const [compatible, required_runtime_version] = isDemoCompatible(demo_dir);
-    if (!compatible) {
-      print(
-        `  âš ï¸ skipped - requires runtime version ${required_runtime_version}`,
-      );
-      continue;
-    }
-
     const lsp_clients = createLSPClients({ root_uri: demo_dir.get_uri() });
     await Promise.all(
       Object.entries(lsp_clients).map(([, lspc]) => {
@@ -211,37 +203,3 @@ async function ci({ filenames }) {
     );
   }
 }
-
-const key_file = new GLib.KeyFile();
-key_file.load_from_file("/.flatpak-info", GLib.KeyFileFlags.NONE);
-// runtime/org.gnome.Sdk/x86_64/master
-const [, , , runtime_version] = key_file
-  .get_string("Application", "runtime")
-  .split("/");
-
-function isDemoCompatible(file) {
-  let str;
-  try {
-    str = new TextDecoder().decode(
-      file.get_child("main.json").load_contents(null)[1],
-    );
-  } catch (err) {
-    console.warn(err);
-    return true;
-  }
-
-  const demo = JSON.parse(str);
-  demo.name = file.get_basename();
-
-  const demo_runtime_version = demo["runtime-version"];
-
-  if (demo_runtime_version === "master") {
-    return [runtime_version === "master", demo_runtime_version];
-  } else if (runtime_version === "master") {
-    return [true, demo_runtime_version];
-  } else if (!demo_runtime_version) {
-    return [true, demo_runtime_version];
-  }
-
-  return [+runtime_version >= +demo_runtime_version, demo_runtime_version];
-}
